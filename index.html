<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GHW Month</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="sky.css" />
</head>

<body>
    <div class="main-in">
        <div id="background-wrap">
            <div class="x1">
                <div class="cloud"></div>
            </div>

            <div class="x2">
                <div class="cloud"></div>
            </div>

            <div class="x3">
                <div class="cloud"></div>
            </div>

            <div class="x4">
                <div class="cloud"></div>
            </div>

            <div class="x5">
                <div class="cloud"></div>
            </div>
        </div>
        <!-- <h1 class="title-main">Signature Wall!</h1> -->
        <div class="header-container">
            <h1 class="signature-header">Signature Wall</h1>
        </div>
        <div class="button-container">
            <button class="button-54" role="button">Leave your own message...</button>
        </div>
        <br /><br />
        <div class="brick-wall" id="brick-row">
            <div class="brick-flex" id="brick-flex">
                <!-- The messages would be displayed here using flexbox -->
            </div>
        </div>
    </div>
    <script>
        fetch('/get_messages')
            .then(response => response.json())
            .then(data => {
                const names = data;
                const messagesDiv = document.getElementById('brick-flex');
                const rows = Math.ceil(names.length / 5);

                document.getElementById("brick-row").style.height = `${rows * 200 + 200}px`;

                if (names.length === 0) {
                    messagesDiv.innerHTML = '<p>No messages yet.</p>';
                } else {
                    for (let i = 0; i < rows; i++) {
                        const row = document.createElement('div');
                        row.classList.add('brick-row');
                        messagesDiv.appendChild(row);
                        for (let j = 0; j < 5 && (i * 5 + j) < names.length; j++) {
                            const name = names[i * 5 + j];
                            const messageElement = document.createElement('div');
                            messageElement.classList.add('brick');
                            messageElement.style.fontFamily = name.font;
                            messageElement.innerHTML = `<span class="dot dot-top-left"></span>
                                <span class="dot dot-top-right"></span>
                                <span class="dot dot-bottom-left"></span>
                                <span class="dot dot-bottom-right"></span>
                                <h2 class="brick-text" style="font-family: ${name.font};">${name.name}</h2>`;
                            const messageBubble = document.createElement('div');
                            messageBubble.classList.add('message-bubble');
                            messageBubble.innerText = name.message;
                            messageElement.appendChild(messageBubble);

                            messageElement.addEventListener('mouseover', () => {
                                messageBubble.style.display = 'block';
                            });

                            messageElement.addEventListener('mouseout', () => {
                                messageBubble.style.display = 'none';
                            });
                            row.appendChild(messageElement);
                        }
                    }
                }
            })
    </script>
</body>

</html>